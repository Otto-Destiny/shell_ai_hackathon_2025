flowchart TD
    A[ğŸ¯ Start: Define Optimization Goals] --> B{Input Target Properties<br/>Properties 1-10}
    B --> C[ğŸ”’ Set Fixed Constraints<br/>Properties 1,2,5,6,7,10 only]
    C --> D[ğŸ“‹ Component Selection<br/>Load from Registry or Manual Entry]
    
    D --> E[âš™ï¸ Configure Parameters<br/>Population Size & Generations]
    E --> F[ğŸ”„ Include Cost Optimization?]
    
    F -->|Yes| G[ğŸ’° Multi-Objective Mode<br/>Error + Cost]
    F -->|No| H[ğŸ¯ Single-Objective Mode<br/>Error Only]
    
    G --> I[ğŸš€ Initialize NSGA-II Algorithm]
    H --> I
    
    I --> J[ğŸ‘¥ Generate Initial Population<br/>Random Component Fractions]
    J --> K[ğŸ”§ Apply Normalization Repair<br/>Ensure Fractions Sum to 1]
    
    K --> L[ğŸ§® Evaluate Solutions]
    L --> M[ğŸ”® ML Model Prediction<br/>Predict Blend Properties]
    M --> N[ğŸ“Š Calculate Objectives<br/>Property Error & Cost]
    
    N --> O[âš–ï¸ Constraint Validation<br/>Check Fixed Targets]
    O --> P{Generation<br/>Limit Reached?}
    
    P -->|No| Q[ğŸ§¬ NSGA-II Operations<br/>Selection, Crossover, Mutation]
    Q --> K
    
    P -->|Yes| R[ğŸ† Extract Pareto Front<br/>Non-dominated Solutions]
    R --> S[ğŸ“ˆ Calculate Quality Scores<br/>Logarithmic Error Transformation]
    
    S --> T[ğŸ¨ Generate Visualizations<br/>Pareto Plot & Solution Cards]
    T --> U[ğŸ“Š Results Dashboard<br/>Sort & Select Solutions]
    
    U --> V{User Action}
    V -->|Save Solution| W[ğŸ’¾ Save to Database<br/>Blend Registry Integration]
    V -->|Analyze Different Solution| X[ğŸ”„ Update Display<br/>Refresh Metrics & Charts]
    V -->|New Optimization| A
    
    W --> Y[âœ… Complete<br/>Solution Saved Successfully]
    X --> U
    
    style A fill:#e1f5fe,stroke:#0277bd,stroke-width:3px
    style I fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style R fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    style Y fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    
    classDef processNode fill:#fff9c4,stroke:#f9a825,stroke-width:2px
    classDef decisionNode fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef dataNode fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef resultNode fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    
    class B,D,E,J,L,M,N,S,T decisionNode
    class C,K,O,Q,U,X processNode
    class W,Y resultNode